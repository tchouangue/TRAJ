<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Cluster Trajectories According to the Subset of Measures Selected Previously — step3clusters • traj</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Cluster Trajectories According to the Subset of Measures Selected Previously — step3clusters"><meta property="og:description" content="Classify trajectories based on the factors identified in step2factors."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">traj</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/traj.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/tchouangue/traj/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Cluster Trajectories According to the Subset of Measures Selected Previously</h1>
    <small class="dont-index">Source: <a href="https://github.com/tchouangue/traj/blob/HEAD/R/step3clusters.R" class="external-link"><code>R/step3clusters.R</code></a></small>
    <div class="hidden name"><code>step3clusters.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Classify trajectories based on the factors identified in step2factors.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">step3clusters</span><span class="op">(</span></span>
<span>  <span class="va">trajFactors</span>,</span>
<span>  nclusters <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nstart <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  criteria <span class="op">=</span> <span class="st">"ccc"</span>,</span>
<span>  forced.factors <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>trajFactors</dt>
<dd><p>Object generated by <code><a href="step2factors.html">step2factors</a></code>. Contains
data factors, eigenvalues, principal factors as well as
the original data.</p></dd>


<dt>nclusters</dt>
<dd><p>Integer number indicating the number
of clusters to use in order to classify the trajectories. If <code>NULL</code>,
the function selects the number of clusters based on an automated criteria specified by index.. Defaults
to <code>NULL</code>.</p></dd>


<dt>nstart</dt>
<dd><p>Integer number designating the number of
seedings that <code><a href="https://rdrr.io/r/stats/kmeans.html" class="external-link">kmeans</a></code> should do in order to cluster the</p></dd>


<dt>criteria</dt>
<dd><p>String indicating the criteria to
select the number of clusters. Defaults to
<code>ccc</code> (Cubic clustering criterion).</p></dd>


<dt>forced.factors</dt>
<dd><p>(Optional) Vector containing the names of the measures calculated in
<code><a href="step1measures.html">step1measures</a></code> to force as factors for the clustering. This vector will override the factors selected by <code><a href="step2factors.html">step2factors</a></code>. Available options: "m1", "m2", "m3", ... ,"m23" and "m24".  Defaults to <code>NULL</code>. See details.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The function returns a <code>traj</code> object that contains objects carried through steps 1 and 2 which includes the original data, measures and factors.</p>


<p>Furthermore, it includes a data.frame containing the ID corresponding to each trajectory, and the cluster number in which the trajectory was classified. This is stored in the <code>clusters</code> field of the <code>traj</code> object. It also contains the cluster distribution of the observations.</p>


<p>Methods to plot the output of <code>step3clusters</code> include:<br></p>
<dl><dt>plot</dt>
<dd><p>plots a 10 person sample from every cluster</p></dd>

<dt><a href="plotMedTraj.html">plotMedTraj</a></dt>
<dd><p>plots the median trajectory of the clusters</p></dd>

<dt><a href="plotMeanTraj.html">plotMeanTraj</a></dt>
<dd><p>plots the mean trajectory of the clsuters</p></dd>

<dt><a href="plotBoxplotTraj.html">plotBoxplotTraj</a></dt>
<dd><p>produce a boxplot of trajectories of every cluster</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>If <code>nclusters</code> is set to <code>NULL</code>, the function will use the
<code><a href="https://rdrr.io/pkg/NbClust/man/NbClust.html" class="external-link">NbClust</a></code> function to select the
optimal number of clusters. The <code>NbClust</code> function
uses <code>kmeans</code> as the cluster analysis method. Te measures are standardized within
the step3clusters function prior to clustering. The criteria
to be computed can be chosen by the <code>criteria</code> argument.
The list of available methods and criteria can be found
in the <code>NbClust</code> help page. Criteria compatible with <code>step3clusters</code> are:
"ch", "kl", "ccc", "hartigan", "scott", "trcovw", "tracew" and "friedman". It is important
to note that some of these criteria will not always yield the same number of clusters when
run multiple times. Increasing <code>nstart</code> will generally stabilize the results.</p>
<p>The function then uses <code><a href="https://rdrr.io/r/stats/kmeans.html" class="external-link">kmeans</a></code> in order to cluster the trajectories
in the required number of clusters. If <code>nclusters</code> is
set to <code>NULL</code>, then the number of clusters is computed by
then the data will be classified into that number of clusters.
<code>kmeans</code> uses the <code>nstart</code> argument in order to select how
many random sets should be run during its execution. If
the function does not converge, increasing <code>nstart</code> can
improve the result. PLease consult the <code><a href="https://rdrr.io/r/stats/kmeans.html" class="external-link">kmeans</a></code> help page for more information.</p>
<p>When <code>forced.factors</code> is set to <code>NULL</code>, the function will select the factors identified
by <code>step2factors</code> in order to cluster the trajectories. When the parameter is set to a vector,
it must contain at least one measure name such as: "m1", "m2", "m3", ... ,"m23" and "m24". The function will then
cluster the trajectories using the stated measures. These measures are generated by <code>step1measures</code>. They range from "m1" to "m24". All of these measures are found in the <code>trajMeasures</code> object.</p>
<p>When the plot function is run without changing the default values, only a <code>traj</code> object
is required. The function will generate a multiplot of all
the clusters. In each plot, 10 randomly selected
trajectories will be traced. The same number of trajectories for each cluster
will be plotted. If the function is rerun, the plots will
not look the same because the trajectories are randomly sampled.
Seeding is required in order replicate a plot.</p>
<p>If <code>color.vect</code> is <code>NULL</code>, the function will randomly assign
a color to each trajectory. The same colors will be used
for all the trajectories in each plot. If specific colors
are chosen, there must be as many colors in the vector as
there are trajectories to be plotted or an error will
thrown.</p>
<p>If <code>clust.num</code> is set to an integer, the cluster associated
with that integer will be plotted. Only that one will be
displayed among the available clusters.</p>
<p>The print function displays the number of observations used in the computation of <code>traj</code>,
the number of clusters as well as the number of observations in each one and
the measures set as factors. These factors are used to cluster the data.
The number of decimal places is defaulted to 2, it can be changed in the arguments
of <code>step3clusters</code>.</p>
<p>The summary function displays the number of observations analysed as well as the total number of
clusters into which the data was classified.
Prints the eigenvalues used to determine the number of
factors to be selected in <code><a href="step2factors.html">step2factors</a></code>.
Prints summary statistics of each of the factors by cluster.
The number of decimal places is defaulted to 2, it can be changed in the parameters
of <code>step3clusters</code>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/NbClust/man/NbClust.html" class="external-link">NbClust</a></code>
<code><a href="https://rdrr.io/r/stats/kmeans.html" class="external-link">kmeans</a></code>
<code><a href="step1measures.html">step1measures</a></code>
<code><a href="step2factors.html">step2factors</a></code>
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Marie-Pierre Sylvestre, Dan Vatnik</p>
<p>marie-pierre.sylvestre@umontreal.ca</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># Setup data </span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">=</span> <span class="va">example.data</span><span class="op">$</span><span class="va">data</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run step1measures, step2factors and step3clusters</span></span></span>
<span class="r-in"><span><span class="va">s1</span> <span class="op">=</span> <span class="fu"><a href="step1measures.html">step1measures</a></span><span class="op">(</span><span class="va">data</span>, ID<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">s2</span> <span class="op">=</span> <span class="fu"><a href="step2factors.html">step2factors</a></span><span class="op">(</span><span class="va">s1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">s3</span> <span class="op">=</span> <span class="fu">step3clusters</span><span class="op">(</span><span class="va">s2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Print and plot 'traj' object</span></span></span>
<span class="r-in"><span><span class="va">s3</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">s3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run step3clusters with predetermined number of clusters</span></span></span>
<span class="r-in"><span><span class="va">s3.4clusters</span> <span class="op">=</span> <span class="fu">step3clusters</span><span class="op">(</span><span class="va">s2</span>, nclusters<span class="op">=</span><span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Display 'traj' object s3.4clusters</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">s3.4clusters</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">s3.4clusters</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">s3</span><span class="op">$</span><span class="va">cluster</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Marie-Pierre Sylvestre, Dan Vatnik, Gillis Delmas TCHOUANGUE DINKOU.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

